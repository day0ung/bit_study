DROP TABLE  CALENDAR
CASCADE CONSTRAINT;

DROP SEQUENCE SEQ_CAL;

CREATE TABLE CALENDAR(
	SEQ NUMBER(8) PRIMARY KEY,
	ID VARCHAR2(50) NOT NULL,
	TITLE VARCHAR2(200) NOT NULL,
	CONTENT VARCHAR2(4000) NOT NULL,
	RDATE VARCHAR2(12) NOT NULL,
	WDATE DATE NOT NULL
);

CREATE SEQUENCE SEQ_CAL
START WITH 1
INCREMENT BY 1;

ALTER TABLE CALENDAR
ADD CONSTRAINT FK_CAL_ID FOREIGN KEY(ID) -- CONSTRAINT 무결성
REFERENCES MEMBER(ID);

SELECT SEQ, ID, TITLE, CONTENT, RDATE, WDATE
--번호매기는것, 번호를 매겻을때 파티션을 쳐주자 날짜별로			--8자리를 가져오는것 > 날짜까지 가져오기2020221	
FROM (SELECT ROW_NUMBER() OVER(PARTITION BY SUBSTR(RDATE, 1, 8)ORDER BY RDATE ASC) RNUM,
		SEQ, ID, TITLE, CONTENT, RDATE, WDATE
    	FROM CALENDAR
	WHERE ID=? AND SUBSTR(RDATE, 1, 6)=?) -- 6자리 >>연도하고 월까지 여기까지 서브쿼리
WHERE RNUM BETWEEN 1 AND 5