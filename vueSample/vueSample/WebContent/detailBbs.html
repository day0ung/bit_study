<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<script src="http://netdna.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>   

<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script src="https://unpkg.com/vue-router"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script src="./jquery/jquery.twbsPagination.js"></script>
<script src="./jquery/jquery.twbsPagination.min.js"></script>
</head>
<body>
<div id="app" class="container">
	<table class="table table-striped table-hover">
	<thead>
		<tr>
		 <th>게시판 상세보기</th>
		</tr>
	</thead>
	
	<tbody>
	<tr>
		<td>작성자{{items.seq}}</td>
		<td>
			<p>{{items.id}}</p>
		</td>		
	</tr>

	<tr>
		<td>제목</td>
		<td>
			<p>{{items.title}}</p>
		</td>
	</tr>
	
	<tr>
		<td>내용</td>
		<td>
			<textarea rows="10" cols="50">{{items.content}}</textarea>
		</td>
	</tr>
	<tr>
		<td colspan="2" align="center">
			<button v-on:click="bbsUpdate">수정하기</button>
			<button v-on:click="bbsDelete">삭제하기</button> 
		</td>
	</tr>
	
	</tbody>
	</table>
</div>

<script type="text/javascript">
var logindata = sessionStorage.getItem("login");
var login = JSON.parse(logindata);

var router = new VueRouter({
	mode: 'history', //이전페이지에 있는 것을 가져온다
	routes: []
});

	var vu = new Vue({
		router,
		el:"#app",
		data:{
			seq:0,
			items:[]
		},
		mounted:function (){  
			this.seq = this.$route.query.seq
			},
		methods:{
			bbsUpdate:function(){
				/* axios.post('http://localhost:3000/updateBbs',{
					params:{seq: vu.seq}
				}).then(res =>{
					alert('통신 ㄱ');
				}); */
			},
			bbsDelete:function(){
				axios.post('http://localhost:3000/deleteBbs',{
					params:{seq: vu.seq}
				}).then(res =>{
					if(res.data == 'success'){
						alert('삭제 완료');
						location.href='bbslist.html';
					}else{
						alert('삭제 실패');
					}
				});
			}
		}	
	});
	
	axios.get('http://localhost:3000/getBbsDetail',	{
		params:{seq: vu.seq}
		}).then(res =>{
			vu.items = res.data;
		});
	

	
</script>
</body>
</html>